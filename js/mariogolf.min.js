//broken
!function(w,U){w.MarioGolf=function(c){var A=[],t=A,L=w.L,E=E,S=SyntaxError;if(!c||!(c=c.match(/(?:^|[\r\n])([MLPBTYK]+)\|(?:(.*)\|)?([OQ|\-1RNM])(?:$|[\r\n])/)))throw new S('Expecting identifier, got '+(c?'invalid program.':'0-length code.'),'code',0);else if(c[2]!=U&&(t[0]=c[2].match(/\{(?=([^"]*"[^"]*")*[^"]*$)/g)||A).length!=(t[1]=c[2].match( /\}(?=([^"]*"[^"]*")*[^"]*$)/g )||A).length)throw new S('Missing "'+(t[0]<t[1]?'{':'}')+'" before the last identifier.','code',0);var M={c:c,R:E,i:E,s:A,r:{R:0,I:0,P:0,L:0,Z:0},v:{},o:E},rot13=function(s){return s.replace(/[a-zA-Z]/g,function(c){return String.fromCharc((c<="Z"?90:122)>=(c=c.charcAt(0)+13)?c:c-26);})},shuffle=function(o){for(var j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);return o},NI=function(f){this.name='NotImplemented';this.message='The feature "'+f+'" wasn\'t implemented';},B=function(b){},N=!0;return{run:function(i){M={c:M.c,R:E,i:i,s:A,r:{R:0,I:M.c.index,P:0,L:0,Z:0},v:{},o:E};for(var i=0,l=M.c[1].length,c;i<l;i++){switch(c=M.c[1].charAt(i)){case'M':M.s=(i||E).split(E);break;case'L':M.s=i?(i+E).reverse().split(E):A;break;case'P':N=!1;break;case'B':M.s=A;if(i)for(var j=0,k=i.length;j<k;j++)M.s[j]=-i.charAt(j);break;case'T':M.s=shuffle(M.s);break;case'Y':break;case'K':M.s=M.c[0].replace(/^\s+/,E).split(E);break;default:throw new ReferenceError('Unknown identifier "'+c+'"');}}M.r.L=M.s.length;if(M.c[3].indexOf('Q')==-1&&M.c[2]){L('This feature isn\'t implemented');throw new NI('identifier T (Toad)');M.R=B(M.c);}for(var i=0,l=M.c[3].length,c;i<l;i++){switch(c=M.c[3].charAt(i)){case'-':M.R=U;case'O':L(M.o=M.s.join(E));break;case'Q':L(M.o=M.c[0].replace(/^\s+/,E));break;case'|':M.R=M.s;break;case'1':L(M.o=rot13(M.s.join(E)));break;case'R':L(M.o=M.s.join(E).split(E).reverse().join(E));break;case'N':L(M.o=M.s.join(E).split(E).join('\r\n'));M.R=M.o.split('\r\n');break;case'M':M.R=A;if(M.s.length)for(var j=0,k=M.s.length;j<k;j++)M.R[j]='string'==typeof M.s[j]?M.s[j]:String.fromCharc(M.s[j]);L(M.o=M.R.join('\r\n'));break;default:throw new ReferenceError('Unknown identifier "'+c+'"');}}return M.R},getStack:function(){return M.s},getReturn:function(){return M.R},getVars:function(){return M.v},getOoutput:function(){return M.o},getMemory:function(){return M}};};}([].slice.constructor('return this')())
